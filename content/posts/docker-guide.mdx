---
title: "Docker 常用命令速查手册"
date: "2024-02-01"
category: "config"
tags: ["Docker", "DevOps", "容器", "配置"]
excerpt: "整理 Docker 日常使用中最常用的命令，包括镜像管理、容器操作、网络配置等。"
---

# Docker 常用命令速查手册

Docker 是目前最流行的容器化平台。本文整理了日常开发中最常用的 Docker 命令。

## 镜像管理

### 拉取镜像

```bash
# 拉取最新版本
docker pull nginx

# 拉取指定版本
docker pull nginx:1.21

# 拉取特定平台镜像
docker pull --platform linux/amd64 nginx
```

### 查看镜像

```bash
# 列出所有镜像
docker images

# 查看镜像详情
docker inspect nginx

# 查看镜像历史
docker history nginx
```

### 删除镜像

```bash
# 删除单个镜像
docker rmi nginx

# 强制删除
docker rmi -f nginx

# 删除所有悬空镜像
docker image prune
```

## 容器操作

### 运行容器

```bash
# 基本运行
docker run -d --name my-nginx -p 80:80 nginx

# 交互模式
docker run -it --rm ubuntu bash

# 挂载卷
docker run -v /host/data:/container/data nginx

# 设置环境变量
docker run -e NODE_ENV=production my-app
```

### 管理容器

```bash
# 列出运行中的容器
docker ps

# 列出所有容器
docker ps -a

# 启动/停止/重启
docker start my-container
docker stop my-container
docker restart my-container

# 删除容器
docker rm my-container

# 查看日志
docker logs -f my-container
```

## Docker Compose

### 基本命令

```bash
# 启动服务
docker-compose up -d

# 停止服务
docker-compose down

# 重新构建
docker-compose up -d --build

# 查看日志
docker-compose logs -f

# 执行命令
docker-compose exec web bash
```

### 示例 docker-compose.yml

```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    depends_on:
      - db
    volumes:
      - ./data:/app/data

  db:
    image: postgres:14
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: mydb
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

## 网络管理

```bash
# 列出网络
docker network ls

# 创建网络
docker network create my-network

# 连接容器到网络
docker network connect my-network my-container

# 查看网络详情
docker network inspect my-network
```

## 实用技巧

### 清理空间

```bash
# 删除所有停止的容器
docker container prune

# 删除未使用的网络
docker network prune

# 删除所有未使用的数据卷
docker volume prune

# 一键清理所有
docker system prune -a
```

### 数据备份

```bash
# 导出容器为镜像
docker commit my-container my-image:backup

# 保存镜像为文件
docker save -o my-image.tar my-image

# 加载镜像
docker load -i my-image.tar
```

希望这个速查手册对你有帮助！
